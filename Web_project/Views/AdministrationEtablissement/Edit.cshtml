@model EtablissementEditViewModel
@{
    ViewBag.Title = "Editer établissement";
}


    <form enctype="multipart/form-data" asp-controller="AdministrationEtablissement" asp-action="edit" method="post" class="mt-3">
        <input hidden asp-for="etablissement.Id" />
        <input hidden asp-for="etablissement.UserId" />
        <input hidden asp-for="ExistingLogoPath" />
        <input hidden asp-for="etablissement.SiteWebShortUrl" />

        <div class="col-md-12 row">
            <div class="form-group col-md-4">
                <label asp-for="etablissement.Nom" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.Nom" class="form-control" placeholder="Nom" />
                <span asp-validation-for="etablissement.Nom" class="text-danger"></span>
            </div>
        </div>
        <br />
        <h5 class="card-title text-center text-dark">Coordonées</h5>
        <div class="col-md-12 row">
            <div class="form-group col-md-10">
                <label asp-for="etablissement.Rue" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.Rue" class="form-control" placeholder="Rue" />
                <span asp-validation-for="etablissement.Rue" class="text-danger"></span>
            </div>
            <div class="form-group col-md-2">
                <label asp-for="etablissement.NumeroBoite" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.NumeroBoite" class="form-control" placeholder="NumeroBoite" />
                <span asp-validation-for="etablissement.NumeroBoite" class="text-danger"></span>
            </div>
        </div>
        <div class="col-md-12 row">
            <div class="form-group col-md-3">
                <label asp-for="etablissement.CodePostal" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.CodePostal" class="form-control" placeholder="Code Postal" />
                <span asp-validation-for="etablissement.CodePostal" class="text-danger"></span>
            </div>
            <div class="form-group col-md-6">
                <label asp-for="etablissement.Ville" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.Ville" class="form-control" placeholder="Ville" />
                <span asp-validation-for="etablissement.Ville" class="text-danger"></span>
            </div>
            <div class="form-group col-md-3">
                <label asp-for="etablissement.Pays" class="col-sm-2 col-form-label"></label>
                <select asp-for="etablissement.Pays" class="custom-select mr-sm-2" asp-items="Html.GetEnumSelectList<MesModels.ClassesEnum.Pays>()">
                    <option value="">Please Select</option>
                </select>
                <span asp-validation-for="etablissement.Pays" class="text-danger"></span>
            </div>
        </div>
        <div class="col-md-12 row">
            <div class="form-group col-md-4">
                <label asp-for="etablissement.NumeroTelephone" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.NumeroTelephone" class="form-control" placeholder="Numero Téléphone" />
                <span asp-validation-for="etablissement.NumeroTelephone" class="text-danger"></span>
            </div>
            <div class="form-group col-md-4">
                <label asp-for="etablissement.NumeroTva" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.NumeroTva" class="form-control" placeholder="Numero TVA" />
                <span asp-validation-for="etablissement.NumeroTva" class="text-danger"></span>
            </div>
            <div class="form-group col-md-4">
                <label asp-for="etablissement.TypeEtab" class="col-sm-2 col-form-label"></label>
                <select asp-for="etablissement.TypeEtab" class="custom-select mr-sm-2" asp-items="Html.GetEnumSelectList<MesModels.ClassesEnum.TypeEtablissement>()">
                    <option value="">Please Select</option>
                </select>
                <span asp-validation-for="etablissement.TypeEtab" class="text-danger"></span>
            </div>
        </div>
        <br />
        <h5 class="card-title text-center text-dark">Infos Utiles</h5>
        <div class="col-md-12 row">
            <div class="form-group col-md-3">
                <label asp-for="etablissement.AdresseEmailPro" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.AdresseEmailPro" class="form-control" placeholder="Adresse Email Pro" />
                <span asp-validation-for="etablissement.AdresseEmailPro" class="text-danger"></span>
            </div>
            <div class="form-group col-md-3">
                <label asp-for="etablissement.AdresseEmailEtablissement" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.AdresseEmailEtablissement" class="form-control" placeholder="Adresse Email Etablissement" />
                <span asp-validation-for="etablissement.AdresseEmailEtablissement" class="text-danger"></span>
            </div>
            <div class="form-group col-md-4">
                <label asp-for="etablissement.AdresseSiteWeb" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.AdresseSiteWeb" class="form-control" placeholder="Ex: http(s)://www.google.com" />
                <span asp-validation-for="etablissement.AdresseSiteWeb" class="text-danger"></span>
            </div>
            <div class="form-group row col-md-2">
                <label asp-for="etablissement.ValidShortUrl" class="col-sm-2 col-form-label">ShortUrl</label>
                <input asp-for="etablissement.ValidShortUrl" class="form-control" placeholder="Professionel" />
                <span asp-validation-for="etablissement.ValidShortUrl" class="text-danger"></span>
            </div>
        </div>
        <br />
        <h5 class="card-title text-center text-dark">Réseaux sociaux</h5>
        <div class="col-md-12 row">
            <div class="form-group col-md-4">
                <label asp-for="etablissement.AdresseInstagram" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.AdresseInstagram" class="form-control" placeholder="Ex: http(s)://www.instagram.com" />
                <span asp-validation-for="etablissement.AdresseInstagram" class="text-danger"></span>
            </div>
            <div class="form-group col-md-4">
                <label asp-for="etablissement.AdresseFacebook" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.AdresseFacebook" class="form-control" placeholder="Ex: http(s)://www.facebook.com" />
                <span asp-validation-for="etablissement.AdresseFacebook" class="text-danger"></span>
            </div>
            <div class="form-group col-md-4">
                <label asp-for="etablissement.AdresseLinkedin" class="col-sm-2 col-form-label"></label>
                <input asp-for="etablissement.AdresseLinkedin" class="form-control" placeholder="Ex: http(s)://www.linkedin.com" />
                <span asp-validation-for="etablissement.AdresseLinkedin" class="text-danger"></span>
            </div>
        </div>
        <br />
        <h5 class="card-title text-center text-dark">Photos et Logo</h5>
        @if (Model.ExistingPhotoPath != null)
        {
            <div class="form-group col-md-3" id="photoPreview">
                <div id="PhotosPreview">

                    @for (int i = 0; i < Model.ExistingPhotoPath.Count; i++)
                    {
                        <ul class="list-group" id="ulPreviewPhoto-@i" onload="HidePhotos()">
                            @Html.HiddenFor(model => model.ExistingPhotoPath[i], new { @id = "PhotoId" })
                            <li class="list-group-item d-flex">
                                <img src="@Model.ExistingPhotoPath[i]" height="120" class="align-self-start p-2" />
                            </li>
                        </ul>
                    }
                    @Html.Label("", "Supprimer toutes les photos", new { @class = "btn btn-danger align-self-center ml-auto p2", id = "deletePhotos", onclick = "supprimerPhoto()" })
                </div>
            </div>
        }
        else
        {
            <div class="form-group row" id="photodownload">
                <label asp-for="Photos" class="col-sm-2 col-form-label"></label>
                <div class="col-sm-10">
                    <div class="custom-file">
                        <input multiple asp-for="Photos" class="form-control custom-file-input" />
                        <label class="custom-file-label">Cliquez ici pour changer de photos (max. 5 Photos)</label>
                    </div>
                </div>
            </div>
        }

        <div class="form-group row" id="photodownload" style="display:none">
            <label asp-for="Photos" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <div class="custom-file">
                    <input multiple asp-for="Photos" class="form-control custom-file-input" />
                    <label class="custom-file-label">Cliquez ici pour changer de photos (max. 5 Photos)</label>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <label asp-for="Logo" class="col-sm-2 col-form-label"></label>
            <div class="col-sm-10">
                <div class="custom-file">
                    <input asp-for="Logo" class="form-control custom-file-input" />
                    <label class="custom-file-label">Cliquez ici pour changer de logo</label>
                </div>
            </div>
        </div>
        <div class="form-group row col-sm-4 offset-4">
            @*<img src="@photoPath" class="imageThumbnail" asp-append-version="true" />*@
        </div>
        <br />
        <h5 class="card-title text-center text-dark">Description</h5>
        <div class="col-sm-10 text-center" id="displayed" style="width:auto">
            <textarea asp-for="etablissement.ZoneTexteLibre" class="input text-center" rows="2" cols="80" placeholder="Ceci est une zone libre...Par exemple,vous pouvez décrire votre établissement."></textarea><br />
            <span asp-validation-for="etablissement.ZoneTexteLibre" class="text-danger"></span>
        </div>

        <h3 class="card-title text-center">Horaire de l'établissement</h3>
        <div class="text-danger"><h6 class="card-title text-center">Afin de mettre une fermeture sur votre horaire, veuillez mettre les valeurs à zéro</h6></div>
        <h6 class="card-title text-center" onclick="myFunction()" style="text-decoration: underline;">Cliquez ici</h6>
        <table class="table table-striped table-sm" id="maTable" style="display:none">
            <thead>
                <tr>
                    <th>
                        Jours
                    </th>
                    <th>
                        Heure ouverture
                    </th>
                    <th>
                        Heure Fermeture
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody>

                @for (int i = 0; i < Model.MonHoraire.Count; i++)
                {
                    <tr>
                        <td>
                            @Html.HiddenFor(model => model.MonHoraire[i].Jour)
                            @Html.HiddenFor(model => model.MonHoraire[i].Id)
                            @Html.Label("", @Model.MonHoraire[i].Jour.ToString(), null)
                        </td>
                        <td>
                            <input asp-for="@Model.MonHoraire[i].Heures_Ouverture" class="form-control" placeholder="Heures_Ouverture" />
                            <span asp-validation-for="@Model.MonHoraire[i].Heures_Ouverture" class="text-danger"></span>
                        </td>
                        <td>
                            <input asp-for="@Model.MonHoraire[i].Heures_Fermeture" class="form-control" placeholder="Heures_Fermeture" />
                            <span asp-validation-for="@Model.MonHoraire[i].Heures_Fermeture" class="text-danger"></span>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        <div asp-validation-summary="All" class="text-danger"></div>
        <br />
        <div class="form-group row">
            <div class="col-sm-10">
                <button type="submit" class="btn btn-primary">Mettre à jour</button>
                <a asp-controller="AdministrationEtablissement" asp-action="index" class="btn btn-primary">Annuler</a>
            </div>
        </div>
        <div id="scroll_to_top">
            <a href="#top"><img src="~/images/BoutonUp.png" alt="Retourner en haut" /></a>
        </div>
        @section Scripts{
            <script src="~/js/Toogle.js"></script>
            <script src="~/js/UploadFiles.js"></script>
            <script type="text/javascript" data-my_var_1="@TempData["Message"]" src="/js/Toastr.js"></script>
        }

    </form>
